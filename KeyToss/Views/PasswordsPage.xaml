<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="KeyToss.Views.PasswordsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:KeyToss.Models.ViewModels">

    <ContentPage.BindingContext>
        <vm:PasswordListViewModel/>
    </ContentPage.BindingContext>

    <Grid RowDefinitions="Auto,*,Auto" RowSpacing="0" Margin="0">

        <!-- ─── Top ───────────────────────── -->
        <Grid Grid.Row="0" HeightRequest="60" BackgroundColor="#EEE" Padding="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button
                Text="🔍"
                FontSize="24"
                BackgroundColor="Transparent"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                Clicked="OnSearchClicked"
                Grid.Column="0"/>

            <Label
                Text="Home"
                FontSize="16"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                Grid.Column="1"/>

            <Button
                x:Name="AddButton"
                Text="+"
                FontSize="20"
                CornerRadius="4"
                Padding="4,2"
                Clicked="OnAddClicked"
                Grid.Column="2"/>
        </Grid>

        <!-- ─── Password List ─────────────────── -->
        <CollectionView
      Grid.Row="1"
      ItemsSource="{Binding Passwords}"
      Margin="8">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame
            CornerRadius="8"
            Padding="8"
            Margin="4"
            BorderColor="#CCC"
            HasShadow="False">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Label
                Text="{Binding WebsiteName}"
                FontAttributes="Bold"
                Grid.Row="0"
                Grid.Column="0"/>

                            <!-- Edit -->
                            <Button
                Text="Edit"
                FontSize="12"
                Grid.Row="0"
                Grid.Column="1"
                Clicked="OnEditClicked"/>

                            <Label
                Text="••••••"
                FontAttributes="Bold"
                Grid.Row="1"
                Grid.Column="0"/>

                            <!-- Delete -->
                            <Button
                Text="Delete"
                FontSize="12"
                TextColor="White"
                BackgroundColor="Red"
                Grid.Row="1"
                Grid.Column="1"
                Clicked="OnDeleteClicked"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- ─── Bottom ───────────────────────── -->
        <Grid Grid.Row="2" HeightRequest="60" BackgroundColor="#EEE" Padding="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- ─── Profile Bottom Here───────────────────────── -->
            <Button
        Text="👤"
        FontSize="24"
        BackgroundColor="Transparent"
        Grid.Column="0"/>

            <Button
        Text="🏠"
        FontSize="24"
        BackgroundColor="Transparent"
        Grid.Column="1"
        HorizontalOptions="Center"
        VerticalOptions="Center"/>

            <BoxView
        Grid.Column="2"
        WidthRequest="12"
        HeightRequest="12"
        BackgroundColor="Transparent"/>
        </Grid>
    </Grid>
</ContentPage>


